{"version":3,"sources":["../../../../../src/api/purchase/approve/services/cieloCancelation.js"],"names":["service","PaymentId","purchaseAmount","Promise","resolve","reject","httpReq","put","process","env","CIELO_API_REQUEST","set","CIELO_API_MERCHANTID","CIELO_API_MERCHANTKEY","end","err","apiRes","message","data","cancelationStatusSucess","body","ReturnCode","ReturnMessage"],"mappings":";;;;;;AAAA;;;;;;AAEA;AACA;;AAEA;;;AAGA,IAAMA,UAAU,SAAVA,OAAU,CAACC,SAAD,EAAYC,cAAZ,EAA+B;;AAE7C,SAAO,IAAIC,OAAJ,CAAa,UAACC,OAAD,EAAUC,MAAV,EAAqB;;AAEvCC,yBAAQC,GAAR,CAAYC,QAAQC,GAAR,CAAYC,iBAAZ,kBAA4CT,SAA5C,cAAZ,EACCU,GADD,CACK,cADL,EACqB,kBADrB,EAECA,GAFD,CAEK,YAFL,EAEmBH,QAAQC,GAAR,CAAYG,oBAF/B,EAGCD,GAHD,CAGK,aAHL,EAGoBH,QAAQC,GAAR,CAAYI,qBAHhC,EAKCC,GALD,CAKK,UAACC,GAAD,EAAMC,MAAN,EAAiB;;AAEpB,UAAGD,GAAH,EAAO;AACLV,eAAO;AACLY,mBAAS,oCADJ;AAELC,gBAAMH;AAFD,SAAP;AAIA;AACD;;AAGD,UAAMI,0BAA0B,GAAhC;;AAEA,UAAGH,OAAOI,IAAP,CAAYC,UAAZ,IAA0BF,uBAA7B,EAAsD;AACpDd,eAAO;AACLY,qEAAyDD,OAAOI,IAAP,CAAYE,aADhE;AAELJ,gBAAMF,OAAOI;AAFR,SAAP;AAIA;AACD;;AAEDhB;AACD,KA3BD;AA4BD,GA9BM,CAAP;AA+BD,CAjCD;;kBAmCeJ,O","file":"cieloCancelation.js","sourcesContent":["import httpReq from 'superagent'\n\n// {\n//   PaymentId,purchaseAmount\n\n// }\n\n\nconst service = (PaymentId, purchaseAmount) => {\n\n  return new Promise ((resolve, reject) => {\n\n    httpReq.put(process.env.CIELO_API_REQUEST + `/1/sales/${PaymentId}/capture`)\n    .set('Content-Type', \"application/json\")\n    .set(\"MerchantId\", process.env.CIELO_API_MERCHANTID)\n    .set(\"MerchantKey\", process.env.CIELO_API_MERCHANTKEY)\n\n    .end((err, apiRes) => {\n\n      if(err){\n        reject({\n          message: \"Error at card operator cancelation\",\n          data: err\n        })\n        return\n      }\n\n\n      const cancelationStatusSucess = \"6\"\n\n      if(apiRes.body.ReturnCode != cancelationStatusSucess) {\n        reject({\n          message: `The transaction cancelation not worked well: ${apiRes.body.ReturnMessage}`,\n          data: apiRes.body\n        })\n        return\n      }\n      \n      resolve()\n    })\n  })\n}\n\nexport default service"]}