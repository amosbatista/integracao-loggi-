{"version":3,"sources":["../../../../../src/api/purchase/approve/services/loggiCancelation.js"],"names":["service","orderId","auth","Promise","resolve","reject","httpReq","post","process","env","LOGGI_API_V2","send","set","end","err","apiRes","message","data","body","cancelOrder","success","confirmOrder","errors"],"mappings":";;;;;;AAAA;;;;;;AAEA;AACA;AACA;;AAEA,IAAMA,UAAU,SAAVA,OAAU,CAACC,OAAD,EAAUC,IAAV,EAAmB;;AAEjC,SAAO,IAAIC,OAAJ,CAAa,UAACC,OAAD,EAAUC,MAAV,EAAqB;;AAEvCC,yBAAQC,IAAR,CAAaC,QAAQC,GAAR,CAAYC,YAAzB,EACCC,IADD,CACM;AACJ,4EAEUV,OAFV;AADI,KADN,EAcCW,GAdD,CAcK,cAdL,EAcqB,kBAdrB,EAeCA,GAfD,CAeK,eAfL,EAesBV,IAftB,EAiBCW,GAjBD,CAiBK,UAACC,GAAD,EAAMC,MAAN,EAAiB;;AAEpB,UAAGD,GAAH,EAAO;AACLT,eAAO;AACLW,mBAAS,wCADJ;AAELC,gBAAMH;AAFD,SAAP;AAID;;AAED,UAAG,CAACC,OAAOG,IAAP,CAAYD,IAAZ,CAAiBE,WAAjB,CAA6BC,OAAjC,EAA0C;AACxCf,eAAO;AACLW,qFADK;AAELC,gBAAMF,OAAOG,IAAP,CAAYD,IAAZ,CAAiBI,YAAjB,CAA8BC;AAF/B,SAAP;AAID;;AAEDlB;AACD,KAlCD;AAmCD,GArCM,CAAP;AAsCD,CAxCD;;kBA0CeJ,O","file":"loggiCancelation.js","sourcesContent":["import httpReq from 'superagent'\n\n// {\n//   orderId: 0\n// }\n\nconst service = (orderId, auth) => {\n\n  return new Promise ((resolve, reject) => {\n\n    httpReq.post(process.env.LOGGI_API_V2)\n    .send({\n      \"query\": `mutation {\n        cancelOrder(input: {\n          id: ${orderId}\n          clientMutationId: \"test_cancel\"\n        }) {\n          success\n          order {\n            status\n          }\n        }\n      }`\n    })\n    .set('Content-Type', \"application/json\")\n    .set('authorization', auth)\n\n    .end((err, apiRes) => {\n      \n      if(err){\n        reject({\n          message: \"Error at Loggi's API order cancelation\",\n          data: err\n        })\n      }\n\n      if(!apiRes.body.data.cancelOrder.success) {\n        reject({\n          message: `The Loggi's order cancelation has response, but returned errors`,\n          data: apiRes.body.data.confirmOrder.errors\n        })\n      }\n      \n      resolve()\n    })\n  })\n}\n\nexport default service"]}